import{r as w,ai as O,al as P,am as y,j as i,an as M,a as e,ao as j,D as v,I as V,ap as S,aq as E,ar as I,as as R,at as T,B as $,R as W,au as _,t as N,w as b,a4 as G,av as z,z as K,H as Q,E as p,G as Y,O as J,Q as X,U as Z,$ as ee,ah as ae,y as ne,F as te,W as re,A as se,Y as oe,aj as ie,N as H,ak as le}from"./index-4a93b268.js";import{b as ce}from"./userRepository-a3bf3672.js";import{H as U}from"./HitPasswordField-ebe35071.js";const de=_(),ue=({label:c,colSpan:o,options:r,field:n,textFieldProps:C,onDelete:f,onEdit:k,onCreate:B,fieldState:x,...q})=>{const g=w.useRef(null),D=O(),m=P(),A=y({mutationFn:k}),F=y({mutationFn:B}),[d,h]=w.useState();return i(M,{colSpan:o,children:[e(j,{...n,openOnFocus:!0,freeSolo:!0,multiple:!0,selectOnFocus:!0,handleHomeEndKeys:!0,loading:F.isLoading,clearOnBlur:!0,loadingText:"Loading...",onChange:async(s,a)=>{if(a){if(a.some(t=>t.includes('Add "'))){const t=a.find(u=>u.includes('Add "')).replace('Add "',"").replace('"',""),l=a.map(u=>u.replace('Add "',"").replace('"',""));await F.mutateAsync(t),m.setValue(n.name,l);return}m.setValue(n.name,a)}},options:r,fullWidth:!0,renderOption:(s,a)=>a.includes('Add "')?e(v,{...s,sx:{color:"primary.main"},component:"li",children:a}):i(v,{...s,sx:{display:"flex",width:"100%"},style:{justifyContent:"space-between"},component:"li",children:[a,i("div",{children:[e(V,{onClick:t=>{t.stopPropagation(),h(a)},children:e(S,{icon:"heroicons:pencil",height:14})}),e(V,{onClick:t=>{t.stopPropagation(),D({action:async()=>{await f(a),m.setValue(n.name,n.value.filter(l=>l!==a))}})},children:e(S,{icon:"heroicons:x-mark",height:14})})]})]}),filterOptions:(s,a)=>{const t=de(s,a),{inputValue:l}=a,u=s.some(L=>l===L);return l!==""&&!u&&t.push(`Add "${l}"`),t},...q,renderInput:s=>{var a;return e(E,{...s,label:c,error:!!x.error,helperText:((a=x.error)==null?void 0:a.message)??"",...C})}}),i(I,{open:d!==void 0,onClose:()=>h(void 0),children:[e(R,{children:e(E,{fullWidth:!0,sx:{mt:6},hiddenLabel:!0,autoFocus:!0,defaultValue:d,inputRef:g})}),i(T,{children:[e($,{onClick:()=>h(void 0),children:"Cancel"}),e(W,{onClick:async()=>{var a;const s=g.current.value;await A.mutateAsync({prevValue:d,newValue:s}),h(void 0),m.setValue(n.name,n.value.map(t=>t===d?s:t)),(a=g.current)==null||a.focus()},variant:"contained",disabled:d===""||A.isLoading,loading:A.isLoading,children:"Save"})]})]})]})},me=N().shape({email:b().required("Email es requerido").email(),password:b().min(4,"Contraseña debe tener al menos 4 caracteres").required("Contraseña es requerida"),password_confirmation:b().required("Es necesario confirmar la Contraseña").oneOf([G("password")],"Las contraseñas no coinciden"),roles:z().min(1,"Debes elegir al menos un rol").required("Debes elegir al menos un rol")}),he={email:"1",roles:[],password:"",password_confirmation:""};function pe({onSubmit:c}){const o=K({resolver:Z(me),defaultValues:he,mode:"onBlur"});return i(Q,{hf:o,onSubmit:c,children:[e(p,{name:"email",control:o.control,render:r=>e(Y,{...r,label:"Email",placeholder:"Carlos"})}),e(p,{name:"password",control:o.control,render:r=>e(U,{...r,label:"Contraseña"})}),e(p,{name:"password_confirmation",control:o.control,render:r=>e(U,{...r,label:"Confirmación de Contraseña"})}),e(p,{name:"roles",control:o.control,render:r=>e(ue,{...r,label:"Roles",onCreate:async n=>alert(n),onDelete:async n=>alert(n),onEdit:async n=>alert(n),options:["admin","otroAdmin","otrotroAdmin"]})}),e(J,{children:e(X,{children:"Crear"})})]})}const Ae=()=>{const{enqueueSnackbar:c}=ee(),o=ce(),{themeStretch:r}=ae(),n=ne(),C=async f=>{await o.mutateAsync(f),c({message:"User created!"}),n(H.dashboard.adminUsers.list)};return i(te,{children:[e(re,{children:i("title",{children:[" Panel Administrativo | ",se]})}),i(oe,{maxWidth:r?!1:"lg",children:[e(ie,{heading:"Alta - Administradores",links:[{name:"Listado",href:H.dashboard.adminUsers.list},{name:"Alta"}]}),e(le,{sx:{p:3},children:e(pe,{onSubmit:C})})]})]})};export{Ae as AdminUserCreatePage,Ae as default};
