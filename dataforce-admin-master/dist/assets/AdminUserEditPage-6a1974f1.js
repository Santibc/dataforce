import{al as B,r as x,j as o,an as D,a as e,aw as w,ax as M,ay as I,az as N,aA as E,D as _,aB as $,ag as U,aC as V,t as S,w as C,a4 as j,z as P,H as A,E as p,O as y,Q as T,U as H,av as k,G as W,aD as G,$ as L,y as O,ah as Q,F as R,W as z,Y,aj as J,N as v,aE as K,aF as g,ak as f}from"./index-1a88e317.js";import{c as X,d as Z,e as ee}from"./userRepository-0d4f6348.js";import{H as F}from"./HitPasswordField-c3610d2d.js";import{R as ae}from"./User-a9673eb1.js";const re=({label:r,colSpan:s,floatingLabel:a=!0,placeholder:t,options:l,field:d,fieldState:u})=>{var m;const b=B(),c=x.useId();return o(D,{colSpan:s,children:[!a&&e(w,{sx:{...M},id:c,error:!!u.error,children:r}),o(I,{fullWidth:!0,children:[a&&e(w,{id:c,children:r}),o(N,{...d,labelId:c,multiple:!0,label:a?r:void 0,error:!!u.error,displayEmpty:!a,renderValue:i=>i.length===0&&!a?e(E,{children:t}):e(_,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:l.filter(n=>d.value.includes(n.value)).map(n=>e($,{label:n.label,onMouseDown:h=>{h.stopPropagation()},onDelete:h=>{b.setValue(d.name,d.value.filter(q=>q!==n.value))}},n.value))}),children:[a?null:e(U,{disabled:!0,value:"",children:e(E,{children:t})}),l.map(i=>e(U,{value:i.value,children:i.label},i.value))]}),e(V,{error:!!u.error,children:((m=u.error)==null?void 0:m.message)??""})]})]})},se=S().shape({password:C().min(4,"Contraseña debe tener al menos 4 caracteres").required("Contraseña es requerida"),password_confirmation:C().required("Es necesario confirmar la Contraseña").oneOf([j("password")],"Las contraseñas no coinciden")}),ne={password:"",password_confirmation:""};function te({onSubmit:r}){const s=P({resolver:H(se),defaultValues:ne,mode:"onBlur"});return o(A,{hf:s,onSubmit:r,children:[e(p,{name:"password",control:s.control,render:a=>e(F,{...a,label:"Contraseña"})}),e(p,{name:"password_confirmation",control:s.control,render:a=>e(F,{...a,label:"Confirmar Contraseña"})}),e(y,{children:e(T,{children:"Save"})})]})}const oe=S().shape({email:C().required("Email es requerido").email(),roles:k().min(1,"Debes elegir al menos un rol").required("Debes elegir al menos un rol")}),ie={email:"",roles:[]};function le({values:r,onSubmit:s}){const a=P({resolver:H(oe),defaultValues:ie,values:r,mode:"onBlur"});return o(A,{hf:a,onSubmit:s,children:[e(p,{name:"email",render:t=>e(W,{...t,label:"Email"})}),e(p,{name:"roles",render:t=>e(re,{...t,label:"Roles",options:ae})}),e(y,{children:e(T,{children:"Save"})})]})}const he=()=>{const r=G(),{enqueueSnackbar:s}=L(),a=O(),{themeStretch:t}=Q(),[l,d]=x.useState("1"),u=X(),b=Z(),c=ee(Number(r.id)),m=async n=>{await b.mutateAsync({...n,id:Number(r.id)}),s({message:"Password Changed!"}),a(v.dashboard.adminUsers.list)},i=async n=>{await u.mutateAsync({...n,id:Number(r.id)}),s({message:"User Updated!"}),a(v.dashboard.adminUsers.list)};return o(R,{children:[e(z,{children:e("title",{children:" Panel Administrativo | TheGelatina"})}),o(Y,{maxWidth:t?!1:"lg",children:[e(J,{heading:"Edit - Administradores",links:[{name:"Listado",href:v.dashboard.adminUsers.list},{name:"Edit"}]}),o(K,{value:l,onChange:(n,h)=>d(h),children:[e(g,{value:"1",label:"Edit Usuario"}),e(g,{value:"2",label:"Cambiar Contraseña"})]}),l==="1"&&e(f,{sx:{p:3},children:e(le,{onSubmit:i,values:c.data})}),l==="2"&&e(f,{sx:{p:3},children:e(te,{onSubmit:m})})]})]})};export{he as AdminUserEditPage,he as default};
